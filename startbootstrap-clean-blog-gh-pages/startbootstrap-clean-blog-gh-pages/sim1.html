<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>MD simulation</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/clean-blog.min.css" rel="stylesheet">
    <link rel="icon" href="img/icon.png">
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">

    <!-- D3 library -->
    <script src="//d3js.org/d3.v4.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    <script src="js/functions.js"></script>
    <script src="https://unpkg.com/d3-simple-slider@0.2.1/build/d3-simple-slider.js"></script>
    <script src="js/jsnetworkx.js"></script>
    <script src="js/lineGraph.js"></script>
    <script src="http://d3js.org/queue.v1.min.js" type="text/javascript"></script>
    <script src="https://d3js.org/d3-selection-multi.v0.4.min.js"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
          <link href="https://cdn.jsdelivr.net/css-toggle-switch/latest/toggle-switch.css" rel="stylesheet" />

  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand" href="index.html">MD simulation</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="sim1.html">Article Work</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="fut_exp.html">Above and Beyond</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Header -->
    <header class="masthead" style="background-image: url('img/sim1.png')">
      <div class="overlay"></div>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="page-heading">
              <h1>Recreating the article</h1>
              <span class="subheading">Creating the model in Python and JavaScript.</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="container">
      <div class="row">
        <div class="col-lg-10 col-md-10 mx-auto">
          <p>In the article of <a href="/pdf/MD_complex_dynamic_system.pdf" target="_blank"><i>Cramer et al. (2016)</i></a>, they propose a theory that explains the difference in vulnerability to MD between individuals. Their model is built on the idea that individuals differ in the strength of the connections between different symptoms. This means that one person only experiences fatigue after several sleepless nights, while another person already experiences fatigue after one sleepless night. This network can be seen as a game of domino, where <i>strong</i> connected networks are domino tiles that are close to each other; one tile tipping makes other tiles tip over as well. <i>Weak</i> connections are tiles placed far apart; one tile tipping over does noet likely cause other tiles to tip over too.</p>

          <img class="img-fluid centerIt" src="img/Fig_dominos.png" alt="" width="75%">
          <span class="caption text-muted">The analogy between vulnerability in a network and spacing of domino tiles (obtained from <i>Cramer et al. (2016)</i>)</span>

          <p>The model was studied in two parts. The fist simulation focussed on the influence of increasing connectivity on the behavior of the MD system. <i>Cramer et al. (2016)</i> tried to answer the question if a system with stronger connections was more prone to end up in a despressed state than the systems with relatively weak connections. The second simulation examined the influence of stress on the behavior of the networks.</p>

          <div class="container col-sm-10">
              <div class="row">
                  <div class="col-sm-6">
                    <iframe src="https://giphy.com/embed/6pg8hzcQkTDoc" width="500" height="200" frameBorder="0" class="giphy-embed" allowFullScreen></iframe><p><a href="https://giphy.com/gifs/failure-6pg8hzcQkTDoc">via GIPHY</a></p>
                  </div>
                  <div class="col-sm-6">
                    <iframe src="https://giphy.com/embed/WmkYhCt0Ddnyw" width="450" height="200" frameBorder="0" class="giphy-embed" allowFullScreen></iframe><p><a href="https://giphy.com/gifs/dominos-WmkYhCt0Ddnyw">via GIPHY</a></p>
                  </div>
              </div>
          </div>


          <p><b>Simulation I: The vulnerability hypothesis</b></p>

          <p>For the first simulation, an intra-individual MD model was constructed, which was able to develop over time. In this model, symptoms can be either 'on' (active) or 'off' (inactive). The probability of a symptom becoming active depends on both its <i>threshold</i> and <i>weight parameters</i>. Each symptom has a threshold, which represents the symptoms 'preference' to be active or inactive. A threshold of 0 means that the symptom has no preference, while a positive threshold means the symptom prefers to be active (and a negative threshold represents the preference for being inactive). The weights represent the undirected connections between two symptoms. If the weight is 0, there is no connection. The higher the value of the weight, the more the two corresponding sympoms prefer to be in the same state ('on' or 'off'). Together, the two parameters influence the probability that a symptom becomes active at a particular point in time. The lower its threshold, and the more activation it recieves from its neighbors, the higher the probability the symptom becomes active itself.</p>

          <p>The model is constructed in the following way:
          <ul>
            <li>It is assumed that the total amount of activation symptom <i>i</i> receives at time <i>t</i> is the weighted summation of all neighboring symptoms <b>X</b>. This is represented by the <i>total activation function</i>: 
                      <p><font color="red">A<sub>i</sub><sup>t</sup> = &#8721<sup>J</sup><sub>j = 1</sub> <b>W</b><sub>ij</sub><b>X</b><sub>j</sub><sup>t-1</sup></font></p></li>
            <li>The probability that a symptom becomes active at time <i>t</i> depends on the difference between the total activation of its neighbors and the symptoms threshold. The parameter <b>b<sub>i</sub></b> denotes the absolute value of the thresholds. The higher the total activation exceeds the threshold of that symptom, the higher the probability that the symptom becomes active. This is represented by the <i>probability function</i>:
                      <p><b>P</b>(<b>X</b><sub>i</sub><sup>t</sup> = 1) = 1 &#8725 (1 + <i>e</i><sup>(<b>b<sub>i</sub></b> - A<sub>i</sub><sup>t</sup>))</sup></li>
          </ul>
          <p><b>The simulation I study</b>
              <p>To investigate the differences in vulnerability between strongly and weakly connected networks, the activation function is modified. The connectivity of the system is represented by the <i>connectivity parameter c</i>, which is multiplied with the weights-matrix <b>W</b>. This results in the following <i>total activation function</i>:
              <p><font color="red">A<sub>i</sub><sup>t</sup> = &#8721<sup>J</sup><sub>j = 1</sub> c<b>W</b><sub>ij</sub><b>X</b><sub>j</sub><sup>t-1</sup></font></p></p></p>

            <p>The connectivity parameter <i>c</i> had three different values, in order to create three networks: a weak <i>c</i> = 0.80), a medium (<i>c</i> = 1.10) and a strong connected network (<i>c</i> = 2.00). For all networks, the simulation was started with all symptoms in an inactive state. The simulation run for 10000 time steps, and each time step the total activation and the probability of symptom-activation was calculated. <font color="red">From these probabilities, the symptom values for the next time step were sampled. HOE?</font><br> 
            At each time point, the total number of activated symptoms was tracked, and labelled as <i>D</i> (the depression of the system). The more symptoms are active, the more 'depressed' the system is. </p>

          <p><b>Simulation I: The vulnerability hypothesis</b></p>


          <img class="img-fluid" src="img/Simulation1.png" alt="">
          <span class="caption text-muted">The state of the MD system in response to stress for varying connectivity</span>

           <div class="container centerIt">
              <div class="row">
                  <div class="col-sm-6">
                      <div class="row align-items-center">
                        <div class="col-sm">
                          <div id="slider1"></div>
                          <p id="value1" class="valueSlider"></p>
                        </div>
                      </div>
                  </div>
                  <div class="col-sm-6">
                      <div class="row align-items-center">
                        <div class="col-sm">
                          <div id="slider2"></div>
                          <p id="value2" class="valueSlider"></p>
                        </div>
                      </div>
                  </div>
              </div>
          </div>

          <div id="lineGraph" class="centerIt"></div>
          <div id='tooltip' style='position:absolute;background-color:lightgray;padding:5px'></div>
          <button onclick='changeGraph("#graphSVG1", "div#lineGraph", "");'>Change Graph</button>

          <svg id="adjacency" class="centerIt" width="550" height="550"></svg>

            <p><b>Simulation II: Investigating the influence of external stress on the MD systems</b></p>

            As external stressful pressures (like the death of a loved one) have an impact on the development of MD, the simulation study above does not do justice to the real life. In this second simulation study, there is an additional factor influencing the MD network: <b>Stress</b>. The aim of this addition is trying to answer the following question:<br>
            <b>What happens to systems with increasing connectivity, when external stess is added?</b><br>

          <div class="container centerIt">
              <div class="row">
                  <div class="col-sm-6">
                      <div class="row align-items-center">
                        <div class="col-sm">
                          <div id="slider1_sim2"></div>
                          <p id="value1_sim2" class="valueSlider"></p>
                        </div>
                      </div>
                  </div>
                  <div class="col-sm-6">
                      <div class="row align-items-center">
                        <div class="col-sm">
                          <div id="slider2_sim2"></div>
                          <p id="value2_sim2" class="valueSlider">2</p>
                        </div>
                      </div>
                  </div>
              </div>
          </div>
          <div id="lineGraph_sim2" class="centerIt"></div>
          <button onclick='changeGraph2("#graphSVG2", "#lineGraph_sim2", "_sim2");'>Change Graph</button>

          <div class="container">
                <div class="switch-toggle switch-3 switch-candy">
                  <input id="on" name="state-d" type="radio" checked="" />
                  <label for="on" onclick="sim1()">Simulation-1</label>
                  <input id="off" name="state-d" type="radio" />
                  <label for="off" onclick="sim2()">Simulation-2</label>
                  <a></a>
                </div>
              <select id="dropdown"></select>
          </div>
          <div class="container centerIt">
            <div class="row align-items-center">
              <div class="col-sm-6">
                <div id="slider1_sim3"></div>
                <p id="value1_sim3" class="valueSlider"></p>
              </div>
              <div class="col-sm-6">
                <div id="slider2_sim3"></div>
                <p id="value2_sim3" class="valueSlider"></p>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-6">
                <div id="graph_nw_lines"></div>
              </div>
              <div class="col-sm-6">
                <div id="graph_network" width="400" height="400"></div>
              </div>
              <button onclick="sim1_2();">Change Graph</button>
            </div>
          </div>

          <script>
              var client = new WebSocket("ws://localhost:39822");
              client.onopen = function(evt) {
                  console.log("Connection Opened");
                  client.send('{"simulation": 1, "I":1000, "c":1.1}');
                  client.send('{"simulation": 2, "I":1000, "c":1.1}');
              };
              client.onmessage = function(evt) {
                  initFunctions(JSON.parse(evt.data));
              };
              client.onclose = function(ect) {
                  console.log("Connection Closed");
              };

          </script>
        </div>
      </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <ul class="list-inline text-center">
            <!--   <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li> -->
              <li class="list-inline-item">
                <a target="_blank" href="https://github.com/popoiopo/Complex_systems">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
            </ul>
            <p class="copyright text-muted">Copyright &copy; Julia Anten, Bas Ch&acirc;tel, Bram Kraaijeveld and Sara Neven</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/clean-blog.min.js"></script>
    <script src="js/lineGraph.js"></script>
    <script src="js/graph_network.js"></script>

  </body>

</html>
